@using SchoolWeb.Models
@model List<UserPO>

@{
    ViewBag.Title = "ViewAllUsers";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<br />
<br />
<h2> Managers</h2>
@if (Session["Username"] != null && (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin)
{
    @Html.ActionLink("Create new Manager", "CreateUser", "User", new { roleID = (int)SchoolWeb.Models.Roles.Manager }, new { @class = "btn btn-primary" })
}

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>
                First Name
            </th>
            <th>
                Last Name
            </th>
            <th>
                Nickname
            </th>
            <th>
                Title
            </th>
            @if (Session["RoleID"] != null)
            {
                <th>
                    Date of Birth
                </th>
            }
            @if (Session["RoleID"] != null)
            {
                <th>
                    Hired Date
                </th>
            }
            <th>
                E-mail
            </th>
            <th>
                Phone Number
            </th>
            @if (Session["RoleID"] != null && ((int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin || (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Manager))
            {
                <th>
                    Home Address
                </th>
            }
            <th>
                About
            </th>
            @if (Session["RoleID"] != null && (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin)
            {
                <th>
                    Username
                </th>
                <th></th>
                <th></th>
            }
        </tr>
    </thead>
    <tbody>
        @foreach (UserPO user in Model)
        {

            if (user.RoleID == (int)SchoolWeb.Models.Roles.Manager)
            {
                <tr>
                    <td>
                        @Html.ActionLink(user.FirstName, "ViewProfile", "User", new { userID = user.UserID }, new { })
                    </td>
                    <td>
                        @user.LastName
                    </td>
                    <td>
                        @user.Nickname
                    </td>
                    <td>
                        @user.Title
                    </td>
                    @if (Session["RoleID"] != null)
                    {
                        <td>
                            @user.DateOfBirth.ToString("dd.MM.yyyy")
                        </td>
                    }
                    @if (Session["RoleID"] != null)
                    {
                        <td>
                            @user.HiredDate.Value.ToString("dd.MM.yyyy")
                        </td>
                    }
                    <td>
                        @user.Email
                    </td>
                    <td>
                        @user.Phone
                    </td>
                    @if (Session["RoleID"] != null && ((int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin || (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Manager))
                    {
                        <td>
                            @user.HomeAddress
                        </td>
                    }
                    <td>
                        @user.About
                    </td>
                    @if (Session["RoleID"] != null && (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin)
                    {
                        <td>
                            @user.Username
                        </td>
                        <td>
                            @Html.ActionLink("Update", "UpdateUser", "User", new { userID = user.UserID }, new { @class = "btn btn-primary" })
                        </td>
                        <td>
                            @Html.ActionLink("Delete", "DeleteUser", "User", new { userID = user.UserID }, new { @class = "btn btn-danger" })
                        </td>
                    }
                </tr>
            }
        }
    </tbody>
    <tfoot></tfoot>
</table>
<br />
<h2> Teachers</h2>
@if (base.Session["Username"] != null && ((int)base.Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin || (int)base.Session["RoleID"] == (int)SchoolWeb.Models.Roles.Manager))
{
    @Html.ActionLink("Create new Teacher", "CreateUser", "User", new { roleID = (int)SchoolWeb.Models.Roles.Teacher }, new { @class = "btn btn-primary" })
}

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>
                First Name
            </th>
            <th>
                Last Name
            </th>
            <th>
                Nickname
            </th>
            <th>
                Title
            </th>
            @if (Session["RoleID"] != null)
            {
                <th>
                    Date of Birth
                </th>
            }
            @if (Session["RoleID"] != null)
            {
                <th>
                    Hired Date
                </th>
            }
            <th>
                E-mail
            </th>
            <th>
                Phone Number
            </th>
            @if (Session["RoleID"] != null && ((int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin || (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Manager))
            {
                <th>
                    Home Address
                </th>
            }
            <th>
                About
            </th>
            @if (Session["RoleID"] != null && ((int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin || (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Manager))
            {
                <th>
                    Username
                </th>
                <th></th>
                <th></th>
            }
        </tr>
    </thead>
    <tbody>
        @foreach (UserPO user in Model)
        {

            if (user.RoleID == (int)SchoolWeb.Models.Roles.Teacher)
            {
                <tr>
                    <td>
                        @Html.ActionLink(user.FirstName, "ViewProfile", "User", new { userID = user.UserID }, new { })
                    </td>
                    <td>
                        @user.LastName
                    </td>
                    <td>
                        @user.Nickname
                    </td>
                    <td>
                        @user.Title
                    </td>
                    @if (Session["RoleID"] != null)
                    {
                        <td>
                            @user.DateOfBirth.ToString("dd.MM.yyyy")
                        </td>
                    }
                    @if (Session["RoleID"] != null)
                    {
                        <td>
                            @user.HiredDate.Value.ToString("dd.MM.yyyy")
                        </td>
                    }
                    <td>
                        @user.Email
                    </td>
                    <td>
                        @user.Phone
                    </td>
                    @if (Session["RoleID"] != null && ((int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin || (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Manager))
                    {
                        <td>
                            @user.HomeAddress
                        </td>
                    }
                    <td>
                        @user.About
                    </td>
                    @if (Session["RoleID"] != null && ((int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin || (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Manager))
                    {
                        <td>
                            @user.Username
                        </td>
                        <td>
                            @Html.ActionLink("Update", "UpdateUser", "User", new { userID = user.UserID }, new { @class = "btn btn-primary" })
                        </td>
                        <td>
                            @Html.ActionLink("Delete", "DeleteUser", "User", new { userID = user.UserID }, new { @class = "btn btn-danger" })
                        </td>
                    }
                </tr>
            }
        }
    </tbody>
    <tfoot></tfoot>
</table>

@if (Session["RoleID"] != null && ((int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin || (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Manager || (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Teacher))
{
    <br />
    <h2>Students</h2>
    if ((int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin || (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Manager)
    {
        @Html.ActionLink("Create new Student", "CreateUser", "User", new { roleID = (int)SchoolWeb.Models.Roles.Student }, new { @class = "btn btn-primary" })
    }

    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>
                    First Name
                </th>
                <th>
                    Last Name
                </th>
                <th>
                    Nickname
                </th>
                <th>
                    Title
                </th>
                <th>
                    Date of Birth
                </th>
                <th>
                    ClassID
                </th>
                <th>
                    E-mail
                </th>
                <th>
                    Phone Number
                </th>
                <th>
                    Home Address
                </th>
                <th>
                    About
                </th>
                @if ((int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin || (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Manager)
                {
                    <th>
                        Username
                    </th>
                    <th></th>
                    <th></th>
                }
            </tr>
        </thead>
        <tbody>
            @foreach (UserPO user in Model)
            {

                if (user.RoleID == (int)SchoolWeb.Models.Roles.Student)
                {
                    <tr>
                        <td>
                            @Html.ActionLink(user.FirstName, "ViewProfile", "User", new { userID = user.UserID }, new { })
                        </td>
                        <td>
                            @user.LastName
                        </td>
                        <td>
                            @user.Nickname
                        </td>
                        <td>
                            @user.Title
                        </td>
                        <td>
                            @user.DateOfBirth.ToString("dd.MM.yyyy")
                        </td>
                        <td>
                            @user.ClassID
                        </td>
                        <td>
                            @user.Email
                        </td>
                        <td>
                            @user.Phone
                        </td>
                        <td>
                            @user.HomeAddress
                        </td>
                        <td>
                            @user.About
                        </td>
                        @if ((int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin || (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Manager)
                        {
                            <td>
                                @user.Username
                            </td>
                            <td>
                                @Html.ActionLink("Update", "UpdateUser", "User", new { userID = user.UserID }, new { @class = "btn btn-primary" })
                            </td>
                            <td>
                                @Html.ActionLink("Delete", "DeleteUser", "User", new { userID = user.UserID }, new { @class = "btn btn-danger" })
                            </td>
                        }
                    </tr>
                }
            }
        </tbody>
        <tfoot></tfoot>
    </table>

    <br />
    <h2>Parents</h2>
    @Html.ActionLink("Create new Parent", "CreateUser", "User", new { roleID = (int)SchoolWeb.Models.Roles.Parent }, new { @class = "btn btn-primary" })

    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>
                    First Name
                </th>
                <th>
                    Last Name
                </th>
                <th>
                    Nickname
                </th>
                <th>
                    Title
                </th>
                <th>
                    Date of Birth
                </th>
                <th>
                    ChildID
                </th>
                <th>
                    E-mail
                </th>
                <th>
                    Phone Number
                </th>
                <th>
                    Home Address
                </th>
                <th>
                    About
                </th>
                @if ((int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin || (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Manager)
                {
                    <th>
                        Username
                    </th>
                    <th></th>
                    <th></th>
                }
            </tr>
        </thead>
        <tbody>
            @foreach (UserPO user in Model)
            {

                if (user.RoleID == (int)SchoolWeb.Models.Roles.Parent)
                {
                    <tr>
                        <td>
                            @Html.ActionLink(user.FirstName, "ViewProfile", "User", new { userID = user.UserID }, new { })
                        </td>
                        <td>
                            @user.LastName
                        </td>
                        <td>
                            @user.Nickname
                        </td>
                        <td>
                            @user.Title
                        </td>
                        <td>
                            @user.DateOfBirth.ToString("dd.MM.yyyy")
                        </td>

                        <td>
                            @user.ChildID
                        </td>
                        <td>
                            @user.Email
                        </td>
                        <td>
                            @user.Phone
                        </td>
                        <td>
                            @user.HomeAddress
                        </td>
                        <td>
                            @user.About
                        </td>
                        @if ((int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin || (int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Manager)
                        {
                            <td>
                                @user.Username
                            </td>
                            <td>
                                @Html.ActionLink("Update", "UpdateUser", "User", new { userID = user.UserID }, new { @class = "btn btn-primary" })
                            </td>
                            <td>
                                @Html.ActionLink("Delete", "DeleteUser", "User", new { userID = user.UserID }, new { @class = "btn btn-danger" })
                            </td>
                        }
                    </tr>
                }
            }
        </tbody>
        <tfoot></tfoot>
    </table>
}

@if (Session["Username"] != null && ((int)Session["RoleID"] == (int)SchoolWeb.Models.Roles.Admin))
{
    @Html.ActionLink("Create new Admin", "CreateUser", "User", new { roleID = (int)SchoolWeb.Models.Roles.Admin }, new { @class = "btn btn-primary" })
}